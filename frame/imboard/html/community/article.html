<script id="communityCommentTemplate" type="text/x-handlebars-template" data-precompile="true">
{{#if commentList}}
{{#each commentList}}
<div class="commentContainer">
	<p class="info">{{#if displayId}}{{displayId}}{{else}}익명사용자{{/if}} <small> | {{registerDate}}</small> <small> | 덧글</small></p>
	<p class="content">{{content}}</p>
</div>
{{/each}}
{{/if}}
</script>

<div data-bind="article" data-param='{"boardId" : "#{query.boardId}", "seq" : "#{query.seq}"}'>
	<div class="articleContainer">
		<div class="page-header">
			<h3 style="position: relative;">
				{{subject}}
				<span style="position: absolute; right:10px; bottom: 5px;">
					{{#if displayId}}
					<small>{{displayId}}</small>
					{{else}}
					<small>익명사용자</small>
					{{/if}}
					<small> | {{shortDate registerDate}}</small>
				</span>
			</h3>
		</div>
		<article>{{{content}}}</article>
		<p style="text-align: right;">
			{{#equals writerId "#{user.id}"}}
			<a href="?fragment=community&sub=write&boardId={{boardId}}&seq={{seq}}" class="btn btn-default">수정</a>
			<button type="button" class="btn btn-default" data-board-id="{{boardId}}" data-seq="{{seq}}">삭제</button>
			{{/equals}}
		</p>
	</div>
	<form data-component="form" id="commentForm">
	<div class="input-group">
		<input type="hidden" name="boardId" value="#{query.boardId}" />
		<input type="hidden" name="articleSeq" value="#{query.seq}" />
		<textarea class="form-control" placeholder="덧글을 입력하세요" name="content"></textarea>
		<span class="input-group-addon" style="cursor: pointer;" data-role="submit">작성</span>
	</div>
	</form>
	<p style="margin:10px 0;">
		<span class="label label-default">덧글 수 {{commentCount}}</span>
	</p>
	<div id="commentList" style="margin-bottom: 30px;" data-bind="commentList" data-param='{"boardId" : "#{query.boardId}", "articleSeq" : "#{query.seq}"}' data-template-id="communityCommentTemplate"></div>
</div>